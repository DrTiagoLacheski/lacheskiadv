/* ========================= MELHOR VISUAL DO DIA ATUAL (HOJE) NO CALENDÁRIO ========================= */
/* O objetivo é destacar "hoje" de forma clara, sem conflitar com dias urgentes ou outros estados.
   O destaque de "hoje" será feito por um anel ao redor do número do dia,
   e não por pontos ou bordas que conflitam com o fundo dos urgentes.
   Para "hoje + urgente", a prioridade visual é da cor de urgente,
   mas o anel de hoje ficará ao redor para indicar ambos.
*/

/* Variáveis customizadas para estilos do dia atual */
:root {
  --calendar-today-ring: 2px solid #2563eb;    /* azul forte */
  --calendar-today-highlight: #2563eb;
  --calendar-today-bg: #eaf2fd;                /* azul bem suave dentro do anel */
  --calendar-today-text: #222;
  --calendar-today-label-bg: #2563eb;
  --calendar-today-label-color: #fff;
}

:root[data-theme="dark"] {
  --calendar-today-ring: 2px solid #38bdf8;    /* azul forte no dark */
  --calendar-today-highlight: #38bdf8;
  --calendar-today-bg: #19304a;                /* azul escuro suave no dark */
  --calendar-today-text: #fff;
  --calendar-today-label-bg: #38bdf8;
  --calendar-today-label-color: #222;
}

/* Reset básico para o dia atual */
.calendar-days div[data-today="true"] {
  position: relative;
  z-index: 3;
  box-shadow: 0 0 0 2px var(--calendar-today-highlight) !important;
  border-radius: 7px;
  color: var(--calendar-today-text) !important;
  font-weight: 700;
  background: var(--calendar-today-bg) !important;
  background-clip: padding-box;
  transition: none;
  outline: none;
}

/* Remove qualquer borda/ponto antigo */
.calendar-days div[data-today="true"]::before,
.calendar-days div[data-today="true"]::after {
  content: none !important;
}

/* Anel/halo do dia atual: sempre tom suave, sem depender de seleção */
.calendar-days div[data-today="true"] {
  box-shadow: 0 0 0 2px var(--calendar-today-highlight) !important;
  border-radius: 7px;
  color: var(--calendar-today-text) !important;
  font-weight: 700;
  background: var(--calendar-today-bg) !important;
  background-clip: padding-box;
  transition: none;
  outline: none;
}

/* "Hoje" + Urgente: mantém cor de urgente, mas mostra o anel azul fino ao redor */
.calendar-days div[data-today="true"][data-priority="urgent"] {
  color: var(--color-urgent) !important;
  background-color: var(--color-urgent-bg) !important;
  border-color: var(--color-urgent);
  font-weight: 800;
  box-shadow: 0 0 0 2px var(--calendar-today-highlight);
  z-index: 5;
}

/* "Hoje" + Triagem urgente */
.calendar-days div[data-today="true"][data-origin="triagem"][data-priority="urgent"] {
  color: var(--color-triagem-urgent) !important;
  background: var(--color-triagem-urgent-bg);
  border-color: var(--color-triagem-urgent-border);
  box-shadow: 0 0 0 2px var(--calendar-today-highlight);
  z-index: 6;
}

/* "Hoje" + outros estados (important, normal, rescheduled): anel azul fino */
.calendar-days div[data-today="true"][data-priority="important"],
.calendar-days div[data-today="true"][data-priority="normal"],
.calendar-days div[data-today="true"][data-priority="rescheduled"] {
  box-shadow: 0 0 0 2px var(--calendar-today-highlight);
}

/* Selecionado e hoje: mantém o anel do selecionado, mas o anel do dia atual continua suave */
.calendar-days div[data-today="true"][data-selected="true"] {
  box-shadow:
    0 0 0 2px var(--color-selected-border),
    0 0 0 2px var(--calendar-today-highlight) !important;
  background: var(--calendar-today-bg) !important;
}

/* Recorrente e hoje: garantir que o anel azul está acima do triângulo de recorrência */
.calendar-days div[data-recurring="true"][data-today="true"] {
  z-index: 8;
}

/* Remove efeito de hover e tooltip para simplificar */
.calendar-days div[data-today="true"]:hover {
  filter: none;
  box-shadow: 0 0 0 2px var(--calendar-today-highlight);
  cursor: pointer;
}
.calendar-days div[data-today="true"]:hover::after,
.calendar-days div[data-today="true"][data-priority="urgent"]:hover::after {
  content: none;
}

/* Versão acessível (sem animações ou transformações) */
@media (prefers-reduced-motion: reduce) {
  .calendar-days div[data-today="true"] {
    filter: none !important;
    transition: none !important;
    box-shadow: 0 0 0 2px var(--calendar-today-highlight);
  }
  .calendar-days div[data-today="true"]:hover {
    filter: none !important;
    box-shadow: 0 0 0 2px var(--calendar-today-highlight);
  }
}

/* HOJE + URGENTE + SELECIONADO: ambos anéis finos, mantendo o suave do hoje */
.calendar-days div[data-today="true"][data-selected="true"][data-priority="urgent"] {
  box-shadow:
    0 0 0 2px var(--color-selected-border),
    0 0 0 2px var(--calendar-today-highlight) !important;
  z-index: 10;
  background-color: var(--color-urgent-bg) !important;
}